var root = {
  todos: async (data, {mongo: {TODOs}}) => {
    console.log('Querying todos')
    return (TODOs.find().toArray())
  },
  add: async ({title}, {mongo: {TODOs}}) => {
    const newTodo = {
      id: (new Date()).getTime(),
      title: title,
      completed: false
    }
    console.log('Inserting')
    const response = await TODOs.insert(newTodo)
    console.log("instered? " + JSON.stringify( Object.assign({id: response.insertedIds[0]}, newTodo), null, 4));
    console.log("type? " + typeof Object.assign({id: response.insertedIds[0]}, newTodo))
    return TODOs.find(Object.assign({id: response.insertedIds[0]}, newTodo)).toArray()
  },
  TODOs: {id: root => root._id | root.id}
}

module.exports = root
